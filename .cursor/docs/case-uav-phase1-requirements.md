# 案例（阶段一：仅需求）— UAV 最小闭环

更新编号：CASE-UAV-P1-1

## 1. 目的
以“需求先行”的方式，独立验证需求域的数据模型、操作契约与验收口径，为后续结构/参数/约束/追溯提供稳定基础。

## 2. 需求树（最小但可验证）
- R1 续航：飞行时间 ≥ 20 min
  - R1.1 动力效率：推进效率 ≥ 0.25（kWh/kg·km）[占位示例，可后续细化]
- R2 负载：有效载荷 ≥ 0.5 kg
  - R2.1 载荷接口：提供标准电源/数据接口（文本性）

属性字段建议：
- id（系统唯一）
- name（短名）
- text（描述）
- acceptanceCriteria（验收准则/计算口径）
- priority（优先级，可选）
- status（Proposed/Approved/Verified 等，可选）
- derivedFrom（父需求引用）

## 3. 操作与校验（与后续契约对应）
- 创建/修改/删除需求（禁止出现环形 derivedFrom）
- 查询：按名称/状态/层次过滤；分页
- 层级操作：设置/变更 `derivedFrom`，禁止跨项目引用
- 校验：
  - 层级完整性（无循环）
  - 字段完整性（id、name、text 必填）
  - 验收准则（acceptanceCriteria）可选但推荐

## 4. 验收示例
- 输入：R1、R1.1、R2、R2.1 的创建、层级设置与查询
- 期望输出：
  - 层级查询返回树形结构
  - 字段校验通过
  - derivedFrom 形成正确父子关系

## 5. 与后续阶段的接口
- P2 结构与参数：将把 R1 分配到 Battery/MotorGroup/FlightController；R2 分配到 Payload/UAV；
- P3 约束与追溯：以分配与派生值计算结果，推动 Verified 状态；
- P4 订阅与报表：对需求状态变化、分配变化进行最小事件通知，并输出覆盖率报表。
